<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>二级菜单</title>
    <style>
        *{
            margin: 0;
            padding: 0;
            list-style:none;
        }
        a,img{
            border: 0;
            text-decoration: none;
        }
        body{
            font:12px/180% Arial, Helvetica, sans-serif,"新宋体";
        }
        
    </style>
    <link rel="stylesheet" href="sdmenu.css">
    <script src="tools.js"></script>
    <script>
        window.onload=function(){
            /* 
                每一个菜单都是div，collapsed类为折叠类
             */


            //  点击菜单切换菜单的显示状态
            // 获取所有span，点击span进行菜单状态的切换
            var menuSpan=document.getElementsByClassName("menuSpan");

            // 定义一个变量，来保存当前打开的菜单
            var openDiv=menuSpan[0].parentNode;



            // 为span绑定单级响应函数
            for(var i=0;i<menuSpan.length;i++){ 
               menuSpan[i].onclick=function(){
                    // 获取当前span的父元素
                    var parentDiv=this.parentNode;
                   
                    // 切换菜单的显示状态
                    toggleMenu(parentDiv);

                    // 判断当前div是否为打开的div
                    if(openDiv!=parentDiv && !hasClass(openDiv,"collapsed"))
                    {

                        // 打开菜单以后应该关闭之前打开的菜单
                        // addClass(openDiv,"collapsed");
                        // toggleClass(openDiv,"collapsed");

                        // 切换菜单的显示状态
                        toggleMenu(openDiv);

                    }

                    // 修改openDiv为当前打开的div
                    openDiv=parentDiv;
                };
            }


            // 用来切换菜单的显示状态以及动画
            function toggleMenu(obj){
                 // 在切换类之前，获取元素的高度
                    var begin=obj.offsetHeight;

                    toggleClass(obj,"collapsed");

                    // 在切换类之后，获取元素的高度
                    var end=obj.offsetHeight;

                    // 动画效果就是从begin到end过渡
                    // 将元素的高度重置为begin
                    obj.style.height=begin+"px";

                    // 执行动画
                    move(obj,end,10,"height",function(){
                        // 动画执行完毕，内联样式没有意义
                        obj.style.height="";
                    });

            }


        };
    </script>
</head>
<body>
    <div id="my_menu" class="sdmenu">
        <div>
            <span class="menuSpan">在线工具</span>
            <a href="#">图像优化</a>
            <a href="#">收藏夹图标生成器</a>
            <a href="#">邮件</a>
            <a href="#">htaccess密码</a>
            <a href="#">梯度图像</a>
            <a href="#">按钮生成器</a>
        </div>
        <div class="collapsed">
            <span class="menuSpan">支持我们</span>
            <a href="#">推荐我们</a>
            <a href="#">连接我们</a>
            <a href="#">网络资源</a>
        </div>
        <div class="collapsed">
            <span class="menuSpan">合作伙伴</span>
            <a href="#">Js工具包</a>
            <a href="#">CSS驱动</a>
            <a href="#">CodingForums</a>
            <a href="#">CSS例子</a>
        </div>
        <div class="collapsed">
            <span class="menuSpan">测试电流</span>
            <a href="#">Current or not</a>
            <a href="#">Current or not</a>
            <a href="#">Current or not</a>
            <a href="#">Current or not</a>
        </div>
    </div>
</body>
</html>